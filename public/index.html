<!DOCTYPE html>
<html ng-app="theTool">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>EventDeck - SINFO</title>
    <meta name="description" content="">
    <meta name="author" content="ink, cookbook, recipes">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

    <!-- Place favicon.ico and apple-touch-icon(s) here  -->
    <link rel="shortcut icon" href="http://sinfo.github.io/img/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="http://sinfo.github.io/img/favicon.ico" type="image/x-icon" />

    <!-- CSS Bower Stuff  -->
    <link rel="stylesheet" type="text/css" href="lib/Ink/dist/css/ink.css">
    <link rel="stylesheet" type="text/css" href="lib/font-awesome/css/font-awesome.min.css">

    <!-- Our Custom CSS  -->
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <!--[if lte IE 8 ]>
        <link rel="stylesheet" href="lib/Ink/dist/css/ink-ie.css" type="text/css" media="screen" title="no title" charset="utf-8">
    <![endif]-->

    <!-- JS Bower Stuff  -->
    <script type="text/javascript" src="lib/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="lib/angular/angular.js"></script>
    <script type="text/javascript" src="lib/angular-resource/angular-resource.js"></script>
    <script type="text/javascript" src="lib/angular-route/angular-route.js"></script>
    <script type="text/javascript" src="lib/angular-sanitize/angular-sanitize.js"></script>
    <script type="text/javascript" src="lib/angular-touch/angular-touch.js"></script>
    <script type="text/javascript" src="lib/angularjs-scroll-glue/src/scrollglue.js"></script>
    <script type="text/javascript" src="lib/ngInfiniteScroll/build/ng-infinite-scroll.js"></script>
    <script type="text/javascript" src="lib/angular-unsavedChanges/dist/unsavedChanges.js"></script>
    <script type="text/javascript" src="lib/underscore/underscore.js"></script>
    <script type="text/javascript" src="lib/Ink/dist/js/holder.js"></script>
    <script type="text/javascript" src="lib/Ink/dist/js/ink-all.min.js"></script>
    <script type="text/javascript" src="lib/Ink/dist/js/autoload.js"></script>

    <!-- Our Custom JS  -->
    <script type="text/javascript" src="socket.io/socket.io.js"></script>
    <script type="text/javascript" src="js/vendor/angular.audio.js"></script>
    <script type="text/javascript" src="js/vendor/markdown.js"></script>
    <script type="text/javascript" src="js/theTool.js"></script>
  </head>

  <body class="ink-drawer" ng-controller="MainController">
    <div id="topbar" style="height: 44px; z-index:600;">
      <nav class="ink-navigation ink-grid ie7">
        <ul class="menu horizontal push-left medium-push-center small-push-center tiny-push-center" style="height: 44px;">
          <li ng-if="me._id" class="hide-all show-medium show-tiny show-small"><button class="fa fa-bars left-drawer-trigger" style="color:#333;"></button></li>
          <li><a class="logo" href="#/">EventDeck</a></li>
          <li>
            <a class="logoPlaceholder" style="height: 44px; vertical-align: middle;" >
              <i class="fa fa-circle-o-notch fa-spin" ng-if="!currentEvent.name"></i>
              {{currentEvent.name || 'Loading...'}}
              <i class="fa fa-caret-down" ng-if="currentEvent.name"></i>
            </a>
            <ul class="submenu">
              <li ng-repeat="event in events | orderBy: ['kind', '-date']"><a ng-click="setCurrentEvent(event)">{{event.name}}</a></li>
            </ul>
          </li>
          <li ng-if="me._id" class="hide-large hide-medium hide-small hide-tiny">
            <input type="text" ng-model="search.name" ng-change="show()" ng-click="show()" placeholder="Super search!!!" style="width: 200px; border-radius: 5px; border: 0; padding: 5px; margin: 5px;">
            <ul ng-if="search.name && search.name.length > 1" class="submenu" style="width: 300px; max-height: 400px; overflow-y: auto; overflow-x: hidden; display: {{display ? 'block' : 'none'}};">
              <li ng-repeat="company in companies | filter:search:strict">
                <a ng-click="hide()" href="#/company/{{company.id}}"><img ng-src="{{company.img}}" style="height: 20px; max-width: 40px"> {{company.name}}</a>
              </li>
              <li ng-repeat="speaker in speakers | filter:search:strict">
                <a ng-click="hide()" href="#/speaker/{{speaker.id}}"><img ng-src="{{speaker.img}}" style="height: 20px; max-width: 40px"> {{speaker.name}}</a>
              </li>
              <li ng-repeat="member in members | filter:search:strict">
                <a ng-click="hide()" href="#/member/{{member.id}}"><img ng-src="https://graph.facebook.com/{{+member.facebook}}/picture" style="height: 20px; max-width: 40px"> {{member.name}}</a>
              </li>
              <li ng-repeat="topic in topics | filter:{text:search.name}:strict">
                <a ng-click="hide()" href="#/topic/{{topic._id}}"><b>{{topic.kind}}</b> {{topic.text | limitTo:30}}<i ng-show="topic.text.length>30">(...)</i></a>
              </li>
            </ul>
          </li>
        </ul>
        <ul ng-if="me._id" class="menu horizontal push-right hide-medium hide-small hide-tiny">
          <li style="{{targetInfo.number == 0 ? 'border-color: FireBrick;' : 'border-color: #e11d21;'}}">
            <a style="{{targetInfo.number == 0 ? 'color: FireBrick;' : 'color: #e11d21;'}}"><span><i class="fa fa-bell"></i> {{targetInfo.text}}</span></a>
            <ul class="submenu" style="max-height: 400px; overflow: auto;">
              <li ng-repeat="notification in targetNotifications | orderBy: 'posted':true" style="width: 600px;">
                <a style="{{notification.unread.indexOf(me.id) != -1 ? 'font-weight: 700;' : ''}}" title="{{notification.posted | date:'medium'}}" href="#/{{notification.thread.replace('-','/')}}">
                  <img ng-src="https://graph.facebook.com/{{getMember(notification.member).facebook}}/picture" style="width:20px">
                  {{getMember(notification.member).name}} {{notification.description}}
                  <span ng-if="notification.thread.indexOf('company-')!=-1 && notification.description.indexOf('created')==-1">on {{getCompany(notification.thread.replace('company-','')).name}}</span>
                  <span ng-if="notification.thread.indexOf('speaker-')!=-1 && notification.description.indexOf('created')==-1">on {{getSpeaker(notification.thread.replace('speaker-','')).name}}</span>
                  <span ng-if="notification.thread.indexOf('topic-')!=-1 && notification.description.indexOf('created')==-1">on a {{getTopic(notification.thread.replace('topic-','')).kind}}</span>
                  <small>({{timeSince(notification.posted)}})</small>
                </a>
              </li>
            </ul>
          </li>
          <li style="border-color:#5319e7;"><a href="#/topics" style="color:#5319e7"><i class="fa fa-rocket"></i> Topics</a>
            <ul class="submenu">
              <li><a href="#/meetings" style="width: 200px;"><i class="fa fa-users"></i> Meetings</a></li>
            </ul>
          </li>
          <li style="border-color: #009800;"><a style="color: #009800;" href="#/speakers"><i class="fa fa-graduation-cap"></i> Speakers</a>
            <ul class="submenu">
              <li><a href="#/communications/speaker/" style="width:200px"><i class="fa fa-comments"></i> Communications</a></li>
              <li><a href="#/speakers/table/" style="width:200px"><i class="fa fa-table"></i> By Member Table</a></li>
            <li><a href="#/speaker"><i class="fa fa-plus"></i> Create New</a></li>
            </ul>
          </li>
          <li style="border-color: #207de5;"><a style="color: #207de5;" href="#/companies"><i class="fa fa-building-o"></i> Companies</a>
            <ul class="submenu">
              <li><a href="#/communications/company/" style="width:200px"><i class="fa fa-comments"></i> Communications</a></li>
              <li><a href="#/companies/table/" style="width:200px"><i class="fa fa-table"></i> By Member Table</a></li>
              <li><a href="#/companies/budget/" style="width:200px"><i class="fa fa-money"></i> Budget</a></li>
            <li><a href="#/company"><i class="fa fa-plus"></i> Create New</a></li>
            </ul>
          </li>
          <li style="border-color: #cf2fb9;"><a style="color: #cf2fb9;" href="#/members"><i class="fa fa-users"></i> Members</a>
            <ul class="submenu">
              <li><a href="#/member/me" style="width: 200px;"><i class="fa fa-user"></i> Me</a></li>
              <li><a ng-click="logout()" style="width: 200px;">Log Out <i class="fa fa-sign-out"></i></a></li>
            </ul>
          </li>
          <li style="border-color: #000;"><a style="color: #000;" href="#/admin"><i class="fa fa-cog"></i></a></li>
        </ul>
      </nav>
    </div>

    <div ng-show="me._id" class="left-drawer" style="z-index:500;">
      <ul>
          <li><a><input type="text" ng-model="search.name" ng-change="searchBoxChanged()" placeholder="Super search!!!"></a>
          <ul ng-if="search.name && search.name.length > 1" class="submenu" style="max-height:400px; overflow:auto; margin: 0px 20px 0px;">
            <li ng-show="search.name" ng-repeat="company in companies | filter:search:strict"><a href="#/company/{{company.id}}"><img ng-src="{{company.img}}" style="height:20px; max-width:40px"> {{company.name}}</a></li>
            <li ng-show="search.name" ng-repeat="speaker in speakers | filter:search:strict"><a href="#/speaker/{{speaker.id}}"><img ng-src="{{speaker.img}}" style="height:20px; max-width:40px"> {{speaker.name}}</a></li>
            <li ng-show="search.name" ng-repeat="member in members | filter:search:strict"><a href="#/member/{{member.id}}"><img ng-src="https://graph.facebook.com/{{+member.facebook}}/picture" style="height:20px; max-width:40px"> {{member.name}}</a></li>
            <li ng-repeat="topic in topics | filter:{text:search.name}:strict"><a ng-click="hide()" href="#/topic/{{topic._id}}"><b>{{topic.kind}}</b> {{topic.text | limitTo:30}}<i ng-show="topic.text.length>30">(...)</i></a></li>
          </ul>
        </li>
        <li>
          <a style="{{targetInfo.number == 0 ? 'background: FireBrick;' : 'background: #e11d21;'}}"><span><i class="fa fa-bell"></i> {{targetInfo.text}}</span></a>
          <ul class="submenu" style="max-height:200px; overflow:auto; margin: 0px 20px 0px;">
            <li ng-repeat="notification in targetNotifications | orderBy: 'posted':true">
              <a href="#/{{notification..thread.replace('-','/')}}">
                <img ng-src="https://graph.facebook.com/{{getMember(notification.member).facebook}}/picture" style="width:20px"> {{getMember(notification.member).name}} {{notification.description}}
                <span ng-if="notification.thread.indexOf('company-')!=-1 && notification.description.indexOf('created')==-1">on {{getCompany(notification.thread.replace('company-','')).name}}</span>
                <span ng-if="notification.thread.indexOf('speaker-')!=-1 && notification.description.indexOf('created')==-1">on {{getSpeaker(notification.thread.replace('speaker-','')).name}}</span>
                <span ng-if="notification.thread.indexOf('topic-')!=-1 && notification.description.indexOf('created')==-1">on a {{getTopic(notification.thread.replace('topic-','')).kind}}</span>
                <small>({{timeSince(notification.posted)}})</small>
              </a>
            </li>
          </ul>
        </li>
        <li><a href="#/topics" style="background:#5319e7"><i class="fa fa-paper-plane"></i> Topics</a>
          <ul class="submenu" style="margin: 0px 20px 0px;">
            <li><a href="#/topics/me" style="width:200px"><i class="fa fa-user"></i> Assigned to me</a></li>
            <li><a href="#/meetings" style="width: 200px;"><i class="fa fa-users"></i> Meetings</a></li>
          </ul>
        </li>
        <li><a href="#/speakers" style="background:#009800"><i class="fa fa-graduation-cap"></i> Speakers</a>
          <ul class="submenu" style="margin: 0px 20px 0px;">
            <li><a href="#/communications/" style="width:200px"><i class="fa fa-comments"></i> Communications</a></li>
            <li><a href="#/speakers/table/" style="width:200px"><i class="fa fa-table"></i> By Member Table</a></li>
            <li><a href="#/speaker"><i class="fa fa-plus"></i> Create New</a></li>
          </ul>
        </li>
        <li><a href="#/companies" style="background:#207de5"><i class="fa fa-building-o"></i> Companies</a>
          <ul class="submenu" style="margin: 0px 20px 0px;">
            <li><a href="#/companies/table/" style="width:200px"><i class="fa fa-table"></i> By Member Table</a></li>
            <li><a href="#/companies/budget/" style="width:200px"><i class="fa fa-money"></i> Budget</a></li>
            <li><a href="#/company"><i class="fa fa-plus"></i> Create New</a></li>
          </ul>
        </li>
        <li><a href="#/members" style="background:#cf2fb9"><i class="fa fa-users"></i> Members</a>
          <ul class="submenu" style="margin: 0px 20px 0px;">
            <li><a href="#/member/me" style="width:200px"><i class="fa fa-user"></i> Me</a></li>
            <li><a ng-click="logout()" style="width:200px">Log Out <i class="fa fa-sign-out"></i></a></li>
          </ul>
        </li>
        <li><a href="#/admin" style="background:#000"><i class="fa fa-cog"></i></a></li>
      </ul>
    </div>

    <br><br>

    <div class="content-drawer">
      <div ng-view></div>
    </div>

    <script>
      Ink.requireModules(['Ink.UI.Drawer_1'], function(Drawer) {
        var inkDrawer = new Drawer({ sides: 'left', mode: 'over' });
      });
    </script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
      app.initialize();
    </script>
  </body>
</html>
